<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Device Selector</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <h1>Audio Device Selector</h1>
        
        <div id="permission-request" class="hidden">
            <div class="permission-message">
                <p>Microphone permission is required to list audio devices.</p>
                <button id="grant-permission" class="button button-primary">Grant Microphone Permission</button>
            </div>
        </div>
        
        <div id="loading-overlay" class="hidden">
            <div class="spinner"></div>
        </div>
        
        <div class="section">
            <h2>Microphone</h2>
            <select id="input-device" class="device-select">
                <option value="">Loading devices...</option>
            </select>
            <div class="volume-control">
                <label for="input-volume">Volume:</label>
                <input type="range" id="input-volume" min="0" max="1" step="0.05" value="1">
                <span id="input-volume-value">100%</span>
            </div>
        </div>

        <div class="section">
            <h2>Speakers / Headphones</h2>
            <select id="output-device" class="device-select">
                <option value="">Loading devices...</option>
            </select>
            <div class="volume-control">
                <label for="output-volume">Volume:</label>
                <input type="range" id="output-volume" min="0" max="1" step="0.05" value="1">
                <span id="output-volume-value">100%</span>
            </div>
        </div>

        <div class="section">
            <h2>Test</h2>
            <div class="button-group">
                <button id="test-sound" class="button">Play Test Sound</button>
                <button id="test-mic" class="button">Record & Playback Mic</button>
            </div>
        </div>

        <div class="section">
            <button id="reset-devices" class="button button-warning">Reset to Default Devices</button>
        </div>

        <div id="permission-warning" class="hidden">
            <p>Microphone access is blocked. Please allow permission in Chrome to list audio devices.</p>
            <button id="retry-permission">Retry</button>
            <button id="open-settings">Open Settings</button>
        </div>
    </div>
    <script src="popup.js"></script>
</body>
</html>
